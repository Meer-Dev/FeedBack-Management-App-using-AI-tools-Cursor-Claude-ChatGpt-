<div [@routerTransition]>
    <div class="content d-flex flex-column flex-column-fluid">
        <div class="d-flex flex-column-fluid">
            <div class="container">
                <div class="card card-custom">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon">
                                <i class="flaticon2-chat-1 text-primary"></i>
                            </span>
                            <h3 class="card-label">{{ 'Courses' | localize }}</h3>
                        </div>
                        <div class="card-toolbar">
                            <button
                                *ngIf="isGranted('Pages.Courses')"
                                (click)="createCourse()"
                                class="btn btn-primary">
                                <i class="fa fa-plus"></i>
                                {{ 'CreateNewCourse' | localize }}
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="mb-5">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <div class="input-icon">
                                        <input
                                            [(ngModel)]="keyword"
                                            (keyup.enter)="list()"
                                            type="text"
                                            class="form-control"
                                            placeholder="{{ 'SearchWithThreeDot' | localize }}"
                                        />
                                        <span><i class="flaticon2-search-1 text-muted"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-6 text-right">
                                    <button
                                        (click)="clearFilters()"
                                        class="btn btn-light-primary px-5 font-weight-bold">
                                        {{ 'Clear' | localize }}
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mb-5">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">{{ 'IsActive' | localize }}</label>
                                    <select
                                        [(ngModel)]="isActive"
                                        (change)="list()"
                                        class="form-control">
                                        <option [ngValue]="null">{{ 'All' | localize }}</option>
                                        <option [ngValue]="true">{{ 'Active' | localize }}</option>
                                        <option [ngValue]="false">{{ 'Inactive' | localize }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <p-table
                            #dataTable
                            sortMode="multiple"
                            (onLazyLoad)="list($event)"
                            [value]="primengTableHelper.records"
                            rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
                            [paginator]="false"
                            [lazy]="true"
                            [loading]="primengTableHelper.isLoading"
                            [totalRecords]="primengTableHelper.totalRecordsCount"
                            styleClass="p-datatable-gridlines">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th style="width: 200px" pSortableColumn="courseName">
                                        {{ 'CourseName' | localize }}
                                        <p-sortIcon field="courseName"></p-sortIcon>
                                    </th>
                                    <th style="width: 200px" pSortableColumn="instructorName">
                                        {{ 'InstructorName' | localize }}
                                        <p-sortIcon field="instructorName"></p-sortIcon>
                                    </th>
                                    <th style="width: 100px" pSortableColumn="isActive">
                                        {{ 'IsActive' | localize }}
                                        <p-sortIcon field="isActive"></p-sortIcon>
                                    </th>
                                    <th style="width: 100px">{{ 'Actions' | localize }}</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-record>
                                <tr>
                                    <td>{{ record.courseName }}</td>
                                    <td>{{ record.instructorName }}</td>
                                    <td>
                                        <span
                                            [class]="record.isActive ? 'badge badge-success' : 'badge badge-danger'">
                                            {{ record.isActive ? ('Active' | localize) : ('Inactive' | localize) }}
                                        </span>
                                    </td>
                                    <td>
                                        <button
                                            *ngIf="isGranted('Pages.Courses')"
                                            (click)="editCourse(record)"
                                            class="btn btn-sm btn-primary">
                                            <i class="fa fa-edit"></i>
                                        </button>
                                        <button
                                            *ngIf="isGranted('Pages.Courses')"
                                            (click)="delete(record)"
                                            class="btn btn-sm btn-danger">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                        <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
                            {{ 'NoData' | localize }}
                        </div>
                        <div class="primeng-paging-container">
                            <p-paginator
                                [rows]="primengTableHelper.defaultRecordsCountPerPage"
                                #paginator
                                (onPageChange)="list($event)"
                                [totalRecords]="primengTableHelper.totalRecordsCount"
                                [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage">
                            </p-paginator>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

